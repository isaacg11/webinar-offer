<html>
    <head>
        <title>Clicktool</title>
    </head>
    <body>
        <h1>Landing Page</h1>
        <a href="http://localhost:5000/click" target="_blank">offer</a>
        <script>
            var onload; 
            window.addEventListener('load', function(e) {
                onload = new Date(); 
            })

            window.addEventListener('unload', function(e) {
                navigator.sendBeacon("http://localhost:5000/landingVisitor", JSON.stringify({ duration: 'test', clickId: 'test' }))
                if(e) {
                    e.returnValue = 'Any string';
                } else {
                    return 'Any string';
                }
            })

            // window.onload = function(e) {
            //     onload = new Date(); 
            // }

            // window.unload = function(e) {
            //     var e = e || window.event;
            //     var unload = new Date(); 
            //     var visitDuration = Math.round((unload.getTime() - onload.getTime()) / 1000); 
            //     var visitClickId = document.cookie.split('=')[1]; 
            //     var xmlhttp = new XMLHttpRequest(); 
            //     xmlhttp.open("POST", "http://localhost:5000/landingVisitor", false); 
            //     xmlhttp.setRequestHeader("Content-Type", "application/json"); 
            //     xmlhttp.send(JSON.stringify({ duration: visitDuration, clickId: visitClickId })); 
            //     if(request.status === 200) {
            //         if(e) {
            //             e.returnValue = 'Any string';
            //         } else {
            //             return 'Any string';
            //         }
            //     }
            // }

        </script>
    </body>
</html>